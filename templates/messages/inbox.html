{% extends "base.html" %}

{% block title %}Сообщения - PivooReddit{% endblock %}

{% block content %}
<div class="messages-container">
    <h1>Входящие сообщения</h1>
    
    <a href="{{ url_for('index') }}" class="btn btn-secondary">← Назад</a>
    
    {% if messages.items %}
        <div class="messages-list">
            {% for message in messages.items %}
                <div class="message-item {% if not message.is_read %}unread{% endif %}">
                    <div class="message-header">
                        <div class="message-sender">
                            <img src="{{ message.sender.avatar_url }}" alt="{{ message.sender.username }}" class="message-avatar">
                            <div class="message-sender-info">
                                <div class="message-sender-name">{{ message.sender.username }}</div>
                                <div class="message-subject">{{ message.subject or '(без темы)' }}</div>
                            </div>
                        </div>
                        <span class="message-time">{{ message.created_at|timesince }}</span>
                    </div>
                    <div class="message-preview">{{ message.content|truncate(100) }}</div>
                    <a href="{{ url_for('view_message', message_id=message.id) }}" class="message-link">Прочитать →</a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="empty-state">У вас нет новых сообщений</p>
    {% endif %}
</div>
{% endblock %}
