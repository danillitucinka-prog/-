{% extends "base.html" %}

{% block title %}–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç - Beer Field{% endblock %}

{% block content %}
<div class="create-post-container">
    <h1>üìù –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h1>
    
    <form method="POST" class="form post-form">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
            {{ form.title(class="form-control", placeholder="–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫...") }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors[0] }}</div>
            {% endif %}
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="subreddit">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</label>
                {{ form.subreddit(class="form-control") }}
                {% if form.subreddit.errors %}
                    <div class="error">{{ form.subreddit.errors[0] }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="content_type">–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞</label>
                {{ form.content_type(class="form-control", id="content_type") }}
            </div>
        </div>
        
        <div class="form-group" id="content_section" style="display: none;">
            <label for="content">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (Markdown –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)</label>
            {{ form.content(class="form-control", rows="6", placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...") }}
        </div>
        
        <div class="form-group" id="url_section" style="display: none;">
            <label for="url">URL —Å—Å—ã–ª–∫–∏</label>
            {{ form.url(class="form-control", placeholder="https://...") }}
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="flair">–§–ª–µ–π—Ä (—Ç–µ–≥–∏)</label>
                {{ form.flair(class="form-control", placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í–æ–ø—Ä–æ—Å") }}
            </div>
            
            <div class="form-group">
                <label for="tags">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                {{ form.tags(class="form-control", placeholder="python, javascript, code") }}
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            <a href="{{ url_for('index') }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>

<script>
document.getElementById('content_type').addEventListener('change', function() {
    const type = this.value;
    document.getElementById('content_section').style.display = type === 'text' ? 'block' : 'none';
    document.getElementById('url_section').style.display = type === 'link' || type === 'image' ? 'block' : 'none';
});
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.getElementById('content_type').dispatchEvent(new Event('change'));
</script>
{% endblock %}
